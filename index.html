<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
    </body>
    <script>
        let score;

        class GameMove {
            constructor(moveName, winsAgainst) {
                this.moveName = moveName;
                this.winsAgainst = winsAgainst;
            }
        }

        const moves = [
            new GameMove("rock", "scissors"),
            new GameMove("paper", "rock"),
            new GameMove("scissors", "paper")
        ];

        function moveNameToIndex(moveName) {
            switch (moveName) {
                case "rock": return 0;
                case "paper": return 1;
                case "scissors": return 2;
                default: return "invalid";
            }
        }

        function playGame(rounds) {
            score = 0;

            for (let i = 0; i < rounds; i++) {
                let scoreBefore = score;
                let userMove = "invalid";
                while (userMove === "invalid") {
                    userMove = moveNameToIndex(prompt(`Round ${i+1}\n\nEnter rock, paper or scissors.`).toLowerCase());
                }
                userMove = moves[userMove];
        
                let computerMove = moves[Math.floor(Math.random() * 3)];
                alert(getRoundResult(userMove, computerMove));
                
                let scoreAfter = score;
                if (scoreBefore === scoreAfter) i--;
            }

            alert(score > 0 ? 
                `You won more games than the computer! Nice one.` : 
                `The computer won more games than you! Better luck next time.`
            );
        }

        function getRoundResult(userMove, computerMove) {
            let output = "";
            output += `You played ${userMove.moveName}, and the computer played ${computerMove.moveName}.\n\n`;
            if (userMove.winsAgainst === computerMove.moveName) {
                output += `${capitalize(userMove.moveName)} beats ${computerMove.moveName}.\n\nYou won!`
                score += 1;
            } 
            else if (computerMove.winsAgainst == userMove.moveName) {
                output += `${capitalize(userMove.moveName)} beats ${computerMove.moveName}.\n\nThe computer beat you!`
                score -= 1;
            } 
            else {
                output += "It's a tie! Play again."
            }

            return output;
        }

        function capitalize(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }

        // odd numbered games only!
        playGame(3);
    </script>
</html>